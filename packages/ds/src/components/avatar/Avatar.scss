@use "../../styles/colors" as *;

@mixin avatar-size($factor) {
  width: calc($factor * var(--size-regular));
  height: calc($factor * var(--size-regular));
}

@mixin context($color) {
  background-color: $color;
  .ds-image__fallback {
    width: auto;
    height: auto;
    background-color: $color;
    .ds-text {
      color: var(--color-white);
    }
  }
}

.ds-avatar {
  display: flex;
  align-items: center;
  flex-direction: column;
  &__size {

    &--small {
      @include avatar-size(3.5);

      .ds-text {
        font-size: var(--dimensions-relative-24);
      }
    }

    &--medium {
      @include avatar-size(7);

      .ds-text {
        font-size: var(--dimensions-relative-62);
      }
    }

    &--large {
      @include avatar-size(14);

      .ds-text {
        font-size: var(--dimensions-relative-76);
      }
    }

    &--big {
      @include avatar-size(28);

      .ds-text {
        font-size: var(--dimensions-relative-250);
      }
    }
  }

  &__wrapper {
    width: 100%;
    height: 100%;
    display: flex;
    position: relative;
    overflow: visible;
    align-items: center;
    border-radius: var(--border-radius-circle);
    justify-content: center;
    background: none;
    padding: 0;
    margin: 0;
    border: none;

    &--context {
      &-info {
        @include context(var(--color-info-80));
      }
      &-error {
        @include context(var(--color-error-80));
      }
      &-neutral {
        &.avatar {
          .ds-text {
            color: var(--color-neutral-90);
          }
        }
      }
      &-success {
        @include context(var(--color-success-80));
      }
      &-primary {
        @include context(var(--color-primary-80));
      }
      &-secondary {
        @include context(var(--color-secondary-80));
      }
      &-attention {
        @include context(var(--color-attention-80));
      }
    }

    &--notification {
      top: 0;
      right: 0;
      width: 28%;
      height: 28%;
      border: 2px solid var(--color-white);
      z-index: 2;
      position: absolute;
      min-width: 12px;
      min-height: 12px;
      max-width: 20px;
      max-height: 20px;
      background: var(--color-error-80);
      box-sizing: border-box;
      box-shadow: 0 2px 6px rgba(0,0,0,0.10);
      border-radius: 100%;
      pointer-events: none;
    }
  }

  &__img {
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    position: absolute;
    object-fit: cover;
    transition: opacity 0.2s;
    border-radius: 100%;
    border: none;
    padding: 0;
    margin: 0;
    background: none;

    &--loaded {
      opacity: 1;
    }
  }
}

.ds-avatar__size--small .ds-avatar__wrapper--notification {
  transform: translate(2px, 1%) scale(1.1);
}

.ds-avatar__size--medium .ds-avatar__wrapper--notification {
  max-width: 25px;
  max-height: 25px;
  transform: translate(4px, 15%) scale(1.1);
}

.ds-avatar__size--large .ds-avatar__wrapper--notification {
  max-width: 35px;
  max-height: 35px;
  transform: translate(-10px, 50%) scale(1.1);
}

.ds-avatar__size--big .ds-avatar__wrapper--notification {
  max-width: 50px;
  max-height: 50px;
  transform: translate(-35px, 90%) scale(1.1);
}
